<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>技术/笔记/操作系统原理课程笔记 - William@blog</title><meta description="OS 课程笔记"><meta property="og:type" content="blog"><meta property="og:title" content="技术/笔记/操作系统原理课程笔记"><meta property="og:url" content="https://willog.top/posts/eaace690/"><meta property="og:site_name" content="William@blog"><meta property="og:description" content="OS 课程笔记"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106221347.png"><meta property="article:published_time" content="2022-01-05T16:00:00.000Z"><meta property="article:modified_time" content="2022-09-17T07:16:07.967Z"><meta property="article:author" content="Weiliang Bai"><meta property="article:tag" content="OS"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106221347.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://willog.top/posts/eaace690/"},"headline":"William@blog","image":["https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106221347.png"],"datePublished":"2022-01-05T16:00:00.000Z","dateModified":"2022-09-17T07:16:07.967Z","author":{"@type":"Person","name":"Weiliang Bai"},"description":"OS 课程笔记"}</script><link rel="canonical" href="https://willog.top/posts/eaace690/"><link rel="icon" href="/img/favicon_owl/android-chrome-512x512.png"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><script src="https://cdn.jsdelivr.net/npm/mermaid@8.8.2/dist/mermaid.min.js"></script><link rel="alternate" href="/atom.xml" title="William@blog" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/William_blog.png" alt="William@blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">🏡Home</a><a class="navbar-item" href="/archives">📁Archives</a><a class="navbar-item" href="/categories">📌Categories</a><a class="navbar-item" href="/gallery">🎨Gallery</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="xiong35的博客" href="http://www.xiong35.cn"><i class="fa fa-paw"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="lam的博客" href="https://lamcoding.github.io"><i class="fa fa-leaf"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fa fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="thumbnail" src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106221347.png" alt="技术/笔记/操作系统原理课程笔记"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2022-01-05T16:00:00.000Z" title="2022-01-05T16:00:00.000Z">2022-01-06</time><span class="level-item"><a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><span> / </span><a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="level-item">27 分钟 读完 (大约 4095 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">技术/笔记/操作系统原理课程笔记</h1><div class="content"><span class="label label-success">OS</span>
<span class="label label-info">课程笔记</span>
<a id="more"></a>
<h2 id="第一章-绪论"><a class="markdownIt-Anchor" href="#第一章-绪论"></a> 第一章 绪论</h2>
<h3 id="操作系统的定义"><a class="markdownIt-Anchor" href="#操作系统的定义"></a> 操作系统的定义</h3>
<p>操作系统是一个大型的程序系统，它负责计算机系统软、硬件资源的分配；控制和协调并发活动；提供用户接口，使用户获得良好的工作环境。</p>
<h3 id="操作系统的特征"><a class="markdownIt-Anchor" href="#操作系统的特征"></a> <strong>操作系统的特征</strong></h3>
<ul>
<li>并发</li>
<li>共享</li>
<li>不确定性</li>
</ul>
<h3 id="多道程序设计技术"><a class="markdownIt-Anchor" href="#多道程序设计技术"></a> 多道程序设计技术</h3>
<ul>
<li>
<p>定义</p>
<ul>
<li>在计算机主存中同时存放几道相互独立的程序。这些程序在管理程序控制之下，<strong>相互穿插</strong>地运行。当某道程序因某种原因不能继续运行下去时(如等待外部设备传输数据)，管理程序便将另一道程序投入运行。</li>
</ul>
</li>
<li>
<p>特征</p>
<ul>
<li>多道</li>
<li>微观上串行</li>
<li>宏观上并行</li>
</ul>
</li>
<li>
<p>应用</p>
<ul>
<li>批处理操作系统（系统吞吐率高：脱机操作 、多道运行、 合理搭配作业；作业周转时间长，用户使用不方便）</li>
</ul>
</li>
<li>
<p>依赖</p>
<ul>
<li>通道技术和中断技术</li>
</ul>
</li>
<li>
<p>多道程序工作示例</p>
</li>
</ul>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106100603.png" alt="多道程序工作示例" style="zoom: 67%;" />
<h3 id="分时技术"><a class="markdownIt-Anchor" href="#分时技术"></a> 分时技术</h3>
<ul>
<li>定义
<ul>
<li>所谓分时技术，是把处理机时间划分成很短的<strong>时间片</strong>(如几百毫秒)轮转地分配给各个应用程序使用，如果某个程序在分配的时间片用完之前计算还未完成，该程序就暂时中断，等待下一轮继续计算。</li>
</ul>
</li>
<li>应用
<ul>
<li>分时操作系统（独占性、并行性、交互性）</li>
</ul>
</li>
</ul>
<h2 id="第二章-结构与硬件支持"><a class="markdownIt-Anchor" href="#第二章-结构与硬件支持"></a> 第二章 结构与硬件支持</h2>
<h3 id="处理机的态"><a class="markdownIt-Anchor" href="#处理机的态"></a> 处理机的态</h3>
<ul>
<li>
<p>定义</p>
<ul>
<li>处理机的态，又称为处理机的特权级，是中央处理机的工作状态。当前处理机正在执行哪类程序，决定处理机的态。</li>
</ul>
</li>
<li>
<p>分类</p>
<ul>
<li><strong>核态</strong>：操作系统的管理程序执行时机器所处的状态，又称处理机的特权级。在此状态下处理机可使用全部指令(包括一组特权指令)；使用全部系统资源(包括整个存储区域)。</li>
<li><strong>管态</strong>：管态比核态的权限低，在此状态下允许使用一些用户态下不能使用的资源，但不能使用修改CPU状态的指令。无核态时，管态执行核态的全部功能。</li>
<li><strong>用户态（目态）</strong>：用户程序执行时机器所处的状态称为用户态。在此状态下禁止使用特权指令，不能直接取用资源与改变机器状态，并且只允许用户程序访问自己的存储区域。</li>
</ul>
<table>
<thead>
<tr>
<th>管态</th>
<th>用户态</th>
</tr>
</thead>
<tbody>
<tr>
<td>操作系统的程序执行</td>
<td>用户程序执行</td>
</tr>
<tr>
<td>使用全部指令</td>
<td>禁止使用特权指令</td>
</tr>
<tr>
<td>使用全部系统资源</td>
<td>只允许用户程序</td>
</tr>
<tr>
<td>整个存储区域</td>
<td>访问自己的存储区域</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>特权指令集</p>
<p><strong>①</strong> <strong>涉及外部设备的输入/输出指令</strong></p>
<p><strong>②</strong> **修改特殊寄存器的指令：**存取用于主存保护的寄存器等</p>
<p><strong>③</strong> **改变机器状态的指令:**开/关中断、进程切换、停机指令等</p>
</li>
<li>
<p>状态切换</p>
</li>
</ul>
<p><strong>① 用户态到管态</strong></p>
<ol>
<li>
<p>管理程序调用</p>
</li>
<li>
<p>中断</p>
</li>
<li>
<p>用户进程产生错误（内部中断）</p>
</li>
<li>
<p>用户程序企图执行特权指令</p>
</li>
</ol>
<p><strong>②</strong> <strong>管态到用户态</strong></p>
<p>​	 从核态转回用户态用一条指令实现，这条指令也是特权指令。一般情况下是中断返回指令。</p>
<h3 id="中断"><a class="markdownIt-Anchor" href="#中断"></a> 中断</h3>
<ul>
<li>概念
<ul>
<li>所谓中断是指某个事件 (例如电源掉电、定点加法溢出或I/O传输结束等) 发生时，系统中止现行程序的运行、引出处理事件程序对该事件进行处理，处理完毕后返回断点继续执行的过程。</li>
</ul>
</li>
<li>按中断源分类</li>
</ul>
<p><strong>①</strong> <strong>中断：</strong> 由处理机<strong>外部</strong>事件引起的中断，包括输入输出中断、外中断。（x86中称为异步中断）</p>
<p><strong>②</strong> <strong>俘获：</strong>   由处理机<strong>内部</strong>事件引起的中断，包括访管中断、程序性中断、机器故障中断。（x86中称为异常）</p>
<p>优先级：俘获 &gt; 中断</p>
<h2 id="第三章-用户接口"><a class="markdownIt-Anchor" href="#第三章-用户接口"></a> 第三章 用户接口</h2>
<ul>
<li>
<p>命令接口</p>
<ul>
<li>操作命令</li>
</ul>
</li>
<li>
<p>程序接口</p>
<ul>
<li>系统功能调用</li>
</ul>
</li>
<li>
<p>系统调用与库函数</p>
<ul>
<li>系统调用代码属于OS，库函数由软件开发商提供，由编译工具链入用户程序</li>
<li>系统调用代码的执行引起CPU状态的变化：用户态 =&gt; 核心态</li>
<li>库函数的执行不会引起CPU状态的变化：用户态</li>
<li>系统调用封装成库函数</li>
</ul>
</li>
<li>
<p>访管中断</p>
<ul>
<li>当处理机执行到访管指令时发生中断，该中断称为访管中断，它表示正在运行的程序对操作系统的某种需求。</li>
</ul>
</li>
</ul>
<h2 id="第四章-进程管理"><a class="markdownIt-Anchor" href="#第四章-进程管理"></a> 第四章 进程管理</h2>
<h3 id="并发程序"><a class="markdownIt-Anchor" href="#并发程序"></a> 并发程序</h3>
<ul>
<li>定义
<ul>
<li>若干个程序段同时在系统中运行，这些程序段的执行在时间上是重叠的，一个程序段的执行尚未结束，另一个程序段的执行已经开始，即使这种重叠是很小的一部分，也称这几个程序段是并发执行的。</li>
</ul>
</li>
<li>并行记号</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;*表示S1,S2,....Sn这n个语句是可以并发执行的*&#x2F;<br>cobegin<br>	S1;S2;...;Sn;<br>coend<br></code></pre></td></tr></table></figure>
<ul>
<li>先后次序图</li>
</ul>
<ol>
<li>
<p>对n个用户作业的处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain">作业1：  I1   C1   P1<br>作业2：  I2   C2   P2<br>		...<br>作业n：  In   Cn   Pn<br></code></pre></td></tr></table></figure>
</li>
</ol>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106113439.png" alt="多用户系统中操作的先后次序图" style="zoom:50%;" />
<ol start="2">
<li>
<p>誊抄 (g: get, c: copy, p: put)</p>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106113801.png" alt="三个并发程序誊抄方案" style="zoom:50%;" />
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106113859.png" alt="誊抄先后次序图" style="zoom:50%;" />
</li>
</ol>
<ul>
<li>特点
<ul>
<li>失去了程序的封闭性和可再现性</li>
<li>程序与计算不再一一对应</li>
<li>程序并发执行的相对制约</li>
</ul>
</li>
</ul>
<h3 id="进程"><a class="markdownIt-Anchor" href="#进程"></a> 进程</h3>
<ul>
<li>
<p>定义</p>
<ul>
<li>进程，即是一个具有一定独立功能的程序关于某个数据集合的一次运行活动。</li>
</ul>
</li>
<li>
<p>进程与程序的区别<br />
① 程序是静态的概念，进程是动态的概念；<br />
② 进程是一个独立运行的活动单位；<br />
③ 进程是竞争系统资源的基本单位；<br />
④ 一个程序可以对应多个进程，一个进程至少包含一个程序</p>
</li>
</ul>
<h3 id="进程变迁"><a class="markdownIt-Anchor" href="#进程变迁"></a> 进程变迁</h3>
<ul>
<li>
<p>状态：就绪、等待、运行</p>
</li>
<li>
<p><strong>状态变迁</strong></p>
<ul>
<li>
<p>变迁原因</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs plain">就绪 --&gt; 运行<br>   	调度程序选择一个新的进程运行<br>   	<br>运行 --&gt; 就绪<br>	运行进程用完了时间片<br>	运行进程被中断，因为一高优先级进程处于就绪状态 <br>	<br>运行 --&gt; 等待<br> 	当一进程必须等待时<br>	OS尚未完成服务<br>	对一资源的访问尚不能进行<br>	初始化I&#x2F;O 且必须等待结果<br>	<br>等待 --&gt; 就绪<br>	当所等待的事件发生时<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>因果变迁</p>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106115417.png" alt="因果变迁" style="zoom:50%;" />
</li>
</ul>
</li>
</ul>
<h3 id="进程描述"><a class="markdownIt-Anchor" href="#进程描述"></a> 进程描述</h3>
<ul>
<li>进程控制块 PCB
<ul>
<li>定义：描述进程与其他进程、系统资源的关系以及进程在各个不同时期所处的状态的数据结构</li>
<li>作用：进程与PCB是一一对应的，系统利用PCB来控制和管理进程，所以PCB是系统感知进程存在的唯一标志</li>
</ul>
</li>
<li>进程的组成
<ul>
<li>程序和数据</li>
<li>PCB</li>
</ul>
</li>
</ul>
<h3 id="进程控制"><a class="markdownIt-Anchor" href="#进程控制"></a> 进程控制</h3>
<ul>
<li>控制原语
<ul>
<li>创建、撤销、阻塞（等待）、唤醒</li>
</ul>
</li>
</ul>
<h3 id="互斥与同步机制"><a class="markdownIt-Anchor" href="#互斥与同步机制"></a> 互斥与同步机制</h3>
<ul>
<li>
<p>临界资源、临界区</p>
<ul>
<li>一次仅允许一个进程使用的资源称为<strong>临界资源</strong>；硬件：如输入机、打印机、磁带机等；软件：如公用变量、数据、表格、队列等</li>
<li>进程中对公共变量 (或存储区)进行审查与修改的程序段，称为相对于该公共变量的<strong>临界区</strong>。</li>
<li>准则</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">有空让进：当无进程在互斥区时，任何有权使用互斥区的进程可进入。<br>无空等待：不允许两个以上的进程同时进入互斥区。<br>多中择一：当没有进程在临界区，而同时有多个进程要求进入临界区，只能让其中之一进入临界区，其他进程必须等待。<br>有限等待：任何进入互斥区的要求应在有限时间内得到满足。<br>让权等待：当进程不能进入临界区时，应立即释放CPU，避免进程忙等待。<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>上锁原语、开锁原语 (0为无锁，1为上锁)</p>
</li>
<li>
<p>P、V 操作原语</p>
</li>
<li>
<p>进程流图</p>
<ul>
<li>示例</li>
</ul>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106123319.png" alt="进程流图示例" style="zoom: 67%;" />
</li>
<li>
<p>两类同步问题解决方案</p>
<ul>
<li>一般的合作问题：画进程流图，对pi设置si信号灯表示pi是否可以开始</li>
<li>共享缓冲区的合作问题（生产者-消费者问题）：设置有界缓冲区互斥锁、满个数、空个数三个信号灯</li>
</ul>
</li>
</ul>
<h3 id="进程通信"><a class="markdownIt-Anchor" href="#进程通信"></a> 进程通信</h3>
<ul>
<li>
<p>P、V 原语：简单的同步信号通讯</p>
</li>
<li>
<p>共享内存</p>
</li>
<li>
<p>消息通信</p>
</li>
<li>
<p>管道</p>
</li>
<li>
<p>socket: 不同（相同）主机间进程通信</p>
</li>
</ul>
<h3 id="线程"><a class="markdownIt-Anchor" href="#线程"></a> 线程</h3>
<h2 id="第五章-资源分配与调度"><a class="markdownIt-Anchor" href="#第五章-资源分配与调度"></a> 第五章 资源分配与调度</h2>
<h3 id="数据结构"><a class="markdownIt-Anchor" href="#数据结构"></a> 数据结构</h3>
<ul>
<li>资源信息块结构（后面几章中的处理及资源信息块、主存资源信息块、设备资源信息块等都类似这种结构）</li>
</ul>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106215802.png" alt="" style="zoom: 67%;" />
<h3 id="分配策略"><a class="markdownIt-Anchor" href="#分配策略"></a> 分配策略</h3>
<ul>
<li>先请求先服务</li>
<li>优先调度</li>
</ul>
<h3 id="死锁"><a class="markdownIt-Anchor" href="#死锁"></a> 死锁</h3>
<ul>
<li>
<p>产生死锁的必要条件</p>
<p><strong>① 互斥条件</strong></p>
<p>涉及的资源是非共享的，即为临界资源。</p>
<p><strong>② 不剥夺条件</strong></p>
<p>进程所获得的资源在未使用完毕之前，不能被其他进程强行夺走。</p>
<p><strong>③ 部分分配</strong></p>
<p>进程每次申请它所需要的一部分资源。在等待一新资源的同时，进程继续占用已分配到的资源。</p>
<p><strong>④ 环路条件</strong></p>
<p>存在一种进程的循环链，链中的每一个进程已获得的资源同时被链中下一个进程所请求。</p>
</li>
<li>
<p>死锁定理</p>
<ul>
<li>如果资源分配图中没有<strong>环路</strong>，则系统中没有死锁，如果图中存在环路则系统中可能存在死锁。</li>
<li>如果每个资源类中只包含<strong>一个</strong>资源实例，则环路是死锁存在的充分必要条件。</li>
</ul>
</li>
<li>
<p>预防死锁</p>
<ul>
<li>静态预防：在作业调度时为选中的作业分配它所需要的所有资源，当资源一旦分配给该作业后，在其整个运行期间这些资源为它独占。</li>
<li>动态预防
<ul>
<li>有序资源分配法（破坏环路条件）：给不同类的资源编号，进程必须按照编号升序请求资源，且申请同一类资源时必须一次申请完</li>
<li><strong>银行家算法</strong>：申请者事先说明对各类资源的<strong>最大需求量</strong>。在进程活动期间动态申请某类资源时，由系统审查现有该类资源的数目是否能满足当前进程的最大需求量，如能满足就予以分配，否则拒绝。</li>
<li><strong>安全序列</strong>的定义：指系统能按某种进程推进顺序（Pi1，Pi2，。。。Pin）为每个进程分配其所需的资源，直至每个并发进程都能达到获得最大资源而顺序完成，此时称(Pi1，Pi2，。。。Pin）为安全序列。</li>
<li>能找到安全序列的状态为<strong>安全状态</strong>。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第六章-处理机调度"><a class="markdownIt-Anchor" href="#第六章-处理机调度"></a> 第六章 处理机调度</h2>
<ul>
<li>作业调度算法
<ul>
<li>先来先服务</li>
<li>短作业优先</li>
<li>响应比高者优先
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>响应比</mtext><mo>=</mo><mtext>响应时间</mtext><mi mathvariant="normal">/</mi><mtext>计算时间</mtext><mo>=</mo><mn>1</mn><mo>+</mo><mtext>等待时间</mtext><mi mathvariant="normal">/</mi><mtext>计算时间</mtext></mrow><annotation encoding="application/x-tex">\text{响应比} = \text{响应时间} / \text{计算时间} = 1 + \text{等待时间} / \text{计算时间}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord cjk_fallback">响应比</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord cjk_fallback">响应时间</span></span><span class="mord">/</span><span class="mord text"><span class="mord cjk_fallback">计算时间</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord cjk_fallback">等待时间</span></span><span class="mord">/</span><span class="mord text"><span class="mord cjk_fallback">计算时间</span></span></span></span></span></li>
</ul>
</li>
<li>优先数</li>
</ul>
</li>
<li>进程调度算法
<ul>
<li>调度方式：剥夺、非剥夺</li>
<li>优先数调度算法
<ul>
<li>静态优先数</li>
<li>动态优先数</li>
</ul>
</li>
<li>循环轮转调度算法
<ul>
<li>简单循环轮转</li>
<li>可变时间片循环轮转</li>
<li>多重时间片循环轮转</li>
</ul>
</li>
</ul>
</li>
<li>调度用的进程状态变迁图
<ul>
<li>调度效果：优先照顾IO量大的进程；适当照顾计算量大的进程。</li>
</ul>
</li>
</ul>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106163225.png" alt="调度用的进程状态变迁图示例" style="zoom: 67%;" />
<h2 id="第七章-主存管理"><a class="markdownIt-Anchor" href="#第七章-主存管理"></a> 第七章 主存管理</h2>
<h3 id="基本概念"><a class="markdownIt-Anchor" href="#基本概念"></a> 基本概念</h3>
<ul>
<li>
<p>虚实分离</p>
<ul>
<li>逻辑地址、程序地址空间</li>
<li>物理地址、主存空间</li>
</ul>
</li>
<li>
<p>地址映射</p>
<ul>
<li>静态地址映射（编译/装入时映射）</li>
<li>动态地址映射（运行时）</li>
</ul>
</li>
<li>
<p>存储保护</p>
<ul>
<li>上下界法</li>
<li>基地址-限长法</li>
</ul>
</li>
</ul>
<h3 id="分区存储管理"><a class="markdownIt-Anchor" href="#分区存储管理"></a> 分区存储管理</h3>
<ul>
<li>分区分配数据结构</li>
</ul>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106184045.png" alt="主存资源信息块和分区描述器" style="zoom:50%;" />
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106184012.png" alt="空闲区队列结构" style="zoom:50%;" />
<ul>
<li>放置策略 （选择空闲区的策略）
<ul>
<li>首次适应算法 （空闲区队列按地址由低到高排列）</li>
<li>最佳适应算法 （空闲区队列按大小由小到大排列）</li>
<li>最坏适应算法 （空闲区队列按大小由大到小排列）</li>
</ul>
</li>
</ul>
<h3 id="页式存储管理"><a class="markdownIt-Anchor" href="#页式存储管理"></a> 页式存储管理</h3>
<ul>
<li>页式地址变换</li>
<li>请调策略
<ul>
<li>扩充页表功能 —— 中断位 辅存地址</li>
<li>缺页处理</li>
</ul>
</li>
<li>淘汰策略
<ul>
<li>扩充页表功能 —— 引用位 改变位</li>
<li>抖动</li>
<li>置换算法
<ul>
<li>先进先出算法</li>
<li>最久未使用 LRU 算法 （计数法、多位寄存器法、栈方法）</li>
<li>LRU 近似算法 （时钟）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第八章-设备管理"><a class="markdownIt-Anchor" href="#第八章-设备管理"></a> 第八章 设备管理</h2>
<ul>
<li>设备独立性
<ul>
<li>所谓设备独立性是指，用户在程序中使用的设备与实际使用的设备无关，也就是在用户程序中仅使用逻辑设备名。</li>
</ul>
</li>
<li>缓冲技术
<ul>
<li>双缓冲、环形缓冲、缓冲池</li>
</ul>
</li>
<li>磁盘调度算法
<ul>
<li>先来先服务 FCFS</li>
<li>最短寻道优先 SSTF</li>
<li>扫描算法 SCAN</li>
<li>循环扫描算法 CSCAN</li>
</ul>
</li>
<li>设备分配
<ul>
<li>独享分配</li>
<li>共享分配</li>
<li>虚拟分配</li>
<li>Spooling 系统
<ul>
<li>利用通道和中断技术，在主机控制之下，由通道完成输入输出工作。系统提供一个软件系统 (包括预输入程序、缓输出程序、井管理程序、预输入表、缓输出表)。它提供输入收存和输出发送的功能，使外部设备可以并行操作。这一软件系统称为SPOOLING系统</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第九章-文件系统"><a class="markdownIt-Anchor" href="#第九章-文件系统"></a> 第九章 文件系统</h2>
<h3 id="文件的逻辑结构"><a class="markdownIt-Anchor" href="#文件的逻辑结构"></a> 文件的逻辑结构</h3>
<ul>
<li>流式文件
<ul>
<li>流式文件是相关的有序字符的集合，是<strong>无结构</strong>的。流式文件是按信息的个数或以特殊字符为界进行存取的。</li>
</ul>
</li>
<li>记录式文件
<ul>
<li>记录式文件是一种<strong>有结构</strong>的文件。这种文件在逻辑上总是被看成一组连续顺序的记录的集合。</li>
<li>按照每个记录长度是否固定分为：定长记录、变长记录</li>
</ul>
</li>
</ul>
<h3 id="文件的物理结构"><a class="markdownIt-Anchor" href="#文件的物理结构"></a> 文件的物理结构</h3>
<ul>
<li>
<p>连续文件</p>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106192159.png" alt="连续文件结构" style="zoom:50%;" />
</li>
<li>
<p>串联文件</p>
</li>
</ul>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106192604.png" alt="串联文件物理结构" style="zoom:50%;" />
<ul>
<li>
<p>FAT 文件 （采用文件分配表，将串联文件中的勾链字集中在一起存放，通常从磁盘第二个扇区开始存放）</p>
<ul>
<li><code>FATX</code> 中的 <code>X</code> 表示一个块号（簇号）占多少位</li>
<li>以FAT16为例，勾链字<code>0000H</code>表示空闲块，<code>FFFFH</code>表示结尾</li>
</ul>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106194450.png" alt="FAT 文件物理结构" style="zoom:50%;" />
</li>
<li>
<p>索引文件</p>
<ul>
<li>多级索引
<ul>
<li>直接索引</li>
<li>一级、二级、三级间接索引</li>
</ul>
</li>
<li>Unix 系统的 i 结点</li>
</ul>
</li>
</ul>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106200547.png" alt="索引文件物理结构" style="zoom:50%;" />
<blockquote>
<p>默认情况下一个磁盘块的大小为 512 Byte，一个块号占据 2 Byte</p>
</blockquote>
<ul>
<li>
<p>Unix 7</p>
<ul>
<li><code>i_addr[8]</code></li>
<li>小型文件 <code>i_addr[0...7]</code> 直接索引，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>×</mo><mn>512</mn><mi>B</mi></mrow><annotation encoding="application/x-tex">8 \times 512B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span></li>
<li>大型文件 <code>i_addr[0...6]</code> 一级间接索引，<code>i_addr[7]</code> 空置，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn><mo>×</mo><mn>256</mn><mo>×</mo><mn>256</mn><mi>B</mi></mrow><annotation encoding="application/x-tex">7 \times 256 \times 256B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span></li>
<li>巨型文件 <code>i_addr[0...6]</code> 一级间接索引，<code>i_addr[7]</code> 二级间接索引，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>7</mn><mo>×</mo><mn>256</mn><mo>+</mo><mn>25</mn><msup><mn>6</mn><mn>2</mn></msup><mo stretchy="false">)</mo><mo>×</mo><mn>512</mn><mi>B</mi></mrow><annotation encoding="application/x-tex">(7\times256 + 256^2 )\times512B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span></li>
</ul>
</li>
<li>
<p>Unix System V</p>
<ul>
<li><code>i_addr[13]</code></li>
<li><code>i_addr[0...9]</code> 直接索引</li>
<li><code>i_addr[10]</code> 一级间接索引</li>
<li><code>i_addr[11]</code> 二级间接索引</li>
<li><code>i_addr[12]</code> 三级间接索引</li>
</ul>
</li>
<li>
<p>空闲块管理之成组链接法</p>
<ul>
<li>结构：<code>s_nfree</code> 为空闲块数，<code>s_free</code>为空闲块号数组（大小为100），<code>s_free[0]</code> 比较特殊因为它不仅仅是某个空闲块号而且它所指向的空闲块又是一个空闲块索引表</li>
</ul>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106214307.png" alt="成组链接结构" style="zoom: 67%;" />
<ul>
<li>分配-释放算法</li>
</ul>
<img src="https://migrate-1301429536.cos.ap-nanjing.myqcloud.com/img/20220106214748.png" alt="成组链接算法" style="zoom:67%;" />
</li>
</ul>
<h3 id="文件目录"><a class="markdownIt-Anchor" href="#文件目录"></a> 文件目录</h3>
<ul>
<li>
<p>一级文件目录</p>
</li>
<li>
<p>树型文件目录</p>
</li>
<li>
<p>硬链接和软链接</p>
</li>
</ul>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/OS/">OS</a></div><div class="addthis_inline_share_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5ed1b54839d71d24" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="https://www.buymeacoffee.com/Weiliang" style="background-color:rgba(255,128,62,.87);border-color:transparent;color:white;" target="_blank" rel="noopener"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送杯咖啡</span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信打赏</span><span class="qrcode"><img src="/img/wechat/qrcode.png" alt="微信打赏"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/posts/5a1e79ff/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">技术/工具/IDEA 学习笔记</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/posts/77d3606/"><span class="level-item">算法/算法分析与设计</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#第一章-绪论"><span class="mr-2">1</span><span> 第一章 绪论</span></a><ul class="menu-list"><li><a class="is-flex" href="#操作系统的定义"><span class="mr-2">1.1</span><span> 操作系统的定义</span></a></li><li><a class="is-flex" href="#操作系统的特征"><span class="mr-2">1.2</span><span> 操作系统的特征</span></a></li><li><a class="is-flex" href="#多道程序设计技术"><span class="mr-2">1.3</span><span> 多道程序设计技术</span></a></li><li><a class="is-flex" href="#分时技术"><span class="mr-2">1.4</span><span> 分时技术</span></a></li></ul></li><li><a class="is-flex" href="#第二章-结构与硬件支持"><span class="mr-2">2</span><span> 第二章 结构与硬件支持</span></a><ul class="menu-list"><li><a class="is-flex" href="#处理机的态"><span class="mr-2">2.1</span><span> 处理机的态</span></a></li><li><a class="is-flex" href="#中断"><span class="mr-2">2.2</span><span> 中断</span></a></li></ul></li><li><a class="is-flex" href="#第三章-用户接口"><span class="mr-2">3</span><span> 第三章 用户接口</span></a></li><li><a class="is-flex" href="#第四章-进程管理"><span class="mr-2">4</span><span> 第四章 进程管理</span></a><ul class="menu-list"><li><a class="is-flex" href="#并发程序"><span class="mr-2">4.1</span><span> 并发程序</span></a></li><li><a class="is-flex" href="#进程"><span class="mr-2">4.2</span><span> 进程</span></a></li><li><a class="is-flex" href="#进程变迁"><span class="mr-2">4.3</span><span> 进程变迁</span></a></li><li><a class="is-flex" href="#进程描述"><span class="mr-2">4.4</span><span> 进程描述</span></a></li><li><a class="is-flex" href="#进程控制"><span class="mr-2">4.5</span><span> 进程控制</span></a></li><li><a class="is-flex" href="#互斥与同步机制"><span class="mr-2">4.6</span><span> 互斥与同步机制</span></a></li><li><a class="is-flex" href="#进程通信"><span class="mr-2">4.7</span><span> 进程通信</span></a></li><li><a class="is-flex" href="#线程"><span class="mr-2">4.8</span><span> 线程</span></a></li></ul></li><li><a class="is-flex" href="#第五章-资源分配与调度"><span class="mr-2">5</span><span> 第五章 资源分配与调度</span></a><ul class="menu-list"><li><a class="is-flex" href="#数据结构"><span class="mr-2">5.1</span><span> 数据结构</span></a></li><li><a class="is-flex" href="#分配策略"><span class="mr-2">5.2</span><span> 分配策略</span></a></li><li><a class="is-flex" href="#死锁"><span class="mr-2">5.3</span><span> 死锁</span></a></li></ul></li><li><a class="is-flex" href="#第六章-处理机调度"><span class="mr-2">6</span><span> 第六章 处理机调度</span></a></li><li><a class="is-flex" href="#第七章-主存管理"><span class="mr-2">7</span><span> 第七章 主存管理</span></a><ul class="menu-list"><li><a class="is-flex" href="#基本概念"><span class="mr-2">7.1</span><span> 基本概念</span></a></li><li><a class="is-flex" href="#分区存储管理"><span class="mr-2">7.2</span><span> 分区存储管理</span></a></li><li><a class="is-flex" href="#页式存储管理"><span class="mr-2">7.3</span><span> 页式存储管理</span></a></li></ul></li><li><a class="is-flex" href="#第八章-设备管理"><span class="mr-2">8</span><span> 第八章 设备管理</span></a></li><li><a class="is-flex" href="#第九章-文件系统"><span class="mr-2">9</span><span> 第九章 文件系统</span></a><ul class="menu-list"><li><a class="is-flex" href="#文件的逻辑结构"><span class="mr-2">9.1</span><span> 文件的逻辑结构</span></a></li><li><a class="is-flex" href="#文件的物理结构"><span class="mr-2">9.2</span><span> 文件的物理结构</span></a></li><li><a class="is-flex" href="#文件目录"><span class="mr-2">9.3</span><span> 文件目录</span></a></li></ul></li></ul></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/William_blog.png" alt="William@blog" height="28"></a><p class="size-small"><span>&copy; 2022 Weiliang Bai</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="🐻Xiong35" href="http://www.xiong35.cn"><i class="fas fa-paw"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="🍃Lam" href="https://lamcoding.github.io"><i class="fas fa-leaf"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://willog.top',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="😆随便搜点什么呗..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"😆随便搜点什么呗...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>